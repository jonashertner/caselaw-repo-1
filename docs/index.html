<!DOCTYPE html>
<html lang="de" data-theme="auto">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Open dataset of Swiss federal and cantonal court decisions.">
<title>Swiss Jurisprudence Open Access Dataset</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,400;14..32,500;14..32,600;14..32,700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root {
  --f-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  --f-mono: 'JetBrains Mono', ui-monospace, 'SF Mono', 'Cascadia Mono', monospace;
  --fs-2xs: 0.625rem; --fs-xs: 0.6875rem; --fs-sm: 0.75rem;
  --fs-base: 0.8125rem; --fs-md: 0.875rem; --fs-lg: 1rem;
  --fs-xl: 1.125rem; --fs-2xl: 1.5rem; --fs-3xl: 2.25rem;
  --r: 10px; --r-sm: 6px; --r-xs: 4px;
  --max-w: 1080px;
  --ease: cubic-bezier(0.4, 0, 0.2, 1);
  --bg: #ffffff; --bg2: #f5f5f5; --surf: #ffffff;
  --brd: #d4d4d4; --brd2: #e5e5e5;
  --tx: #0a0a0a; --tx2: #525252; --tx3: #8a8a8a;
  --ac: #171717; --ac-bg: rgba(0,0,0,0.04);
  --red: #d1242f;
}
[data-theme="dark"] {
  --bg: #0a0a0a; --bg2: #161616; --surf: #161616;
  --brd: #404040; --brd2: #262626;
  --tx: #f5f5f5; --tx2: #a3a3a3; --tx3: #6b6b6b;
  --ac: #f5f5f5; --ac-bg: rgba(255,255,255,0.05);
  --red: #f47067;
}
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: var(--f-sans); font-size: var(--fs-md); line-height: 1.55;
  background: var(--bg); color: var(--tx);
  -webkit-font-smoothing: antialiased;
  transition: background 0.25s var(--ease), color 0.25s var(--ease);
}
.w { max-width: var(--max-w); margin: 0 auto; padding: 0 24px; }

/* ── Toolbar ── */
.toolbar {
  position: sticky; top: 0; z-index: 100;
  background: color-mix(in srgb, var(--bg) 85%, transparent);
  backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--brd2);
}
.toolbar-inner { display: flex; justify-content: space-between; align-items: center; height: 44px; }
.lang-sw {
  display: flex; gap: 2px; background: var(--bg2);
  border: 1px solid var(--brd2); border-radius: var(--r-sm); padding: 2px;
}
.lang-sw button {
  font-family: var(--f-sans); font-size: var(--fs-xs); font-weight: 600;
  letter-spacing: 0.04em; padding: 3px 9px; border: none;
  border-radius: var(--r-xs); background: transparent; color: var(--tx3);
  cursor: pointer; transition: all 0.15s var(--ease); text-transform: uppercase;
}
.lang-sw button:hover { color: var(--tx2); }
.lang-sw button.on {
  background: var(--surf); color: var(--tx);
  box-shadow: 0 1px 2px rgba(0,0,0,0.06);
}
[data-theme="dark"] .lang-sw button.on { box-shadow: 0 0 0 1px var(--brd); }
.tbtn {
  display: flex; align-items: center; justify-content: center;
  width: 32px; height: 32px; border: 1px solid var(--brd2);
  border-radius: var(--r-sm); background: var(--bg2); color: var(--tx2);
  cursor: pointer; transition: all 0.15s var(--ease);
}
.tbtn:hover { color: var(--tx); border-color: var(--brd); }
.tbtn svg { width: 16px; height: 16px; }

/* ── Header ── */
header { padding: 72px 0 16px; text-align: center; }
header h1 {
  font-size: var(--fs-3xl); font-weight: 700;
  letter-spacing: -0.04em; line-height: 1.1;
}
header h1 .ch { color: var(--red); font-weight: 800; }
header .sub { color: var(--tx3); font-size: var(--fs-md); margin-top: 6px; font-weight: 400; }

/* ── KPI ── */
.kpis { display: grid; grid-template-columns: repeat(4,1fr); gap: 1px; margin: 48px 0 64px; background: var(--brd2); border: 1px solid var(--brd2); border-radius: var(--r); overflow: hidden; }
.kpi {
  text-align: center; padding: 28px 12px; background: var(--surf);
}
.kpi-v {
  font-family: var(--f-mono); font-size: var(--fs-2xl); font-weight: 700;
  letter-spacing: -0.03em; line-height: 1; font-variant-numeric: tabular-nums;
}
.kpi-l {
  font-size: var(--fs-xs); font-weight: 500; color: var(--tx3);
  text-transform: uppercase; letter-spacing: 0.08em; margin-top: 8px;
}

/* ── Sections ── */
section { margin-bottom: 64px; }
.sh { display: flex; align-items: center; gap: 10px; margin-bottom: 16px; }
.sh h2 { font-size: var(--fs-lg); font-weight: 600; letter-spacing: -0.01em; }
.sh .badge {
  font-family: var(--f-mono); font-size: var(--fs-xs); font-weight: 500;
  color: var(--tx3); background: var(--bg2); border: 1px solid var(--brd2);
  border-radius: 100px; padding: 2px 10px; line-height: 1.5;
}

/* ── Tables ── */
.tw { border: 1px solid var(--brd); border-radius: var(--r); overflow: hidden; }
.ct { width: 100%; border-collapse: collapse; }
.ct th {
  text-align: left; padding: 10px 16px; background: var(--bg2); color: var(--tx3);
  font-size: var(--fs-xs); font-weight: 600; text-transform: uppercase;
  letter-spacing: 0.06em; border-bottom: 1px solid var(--brd);
  cursor: pointer; user-select: none; white-space: nowrap;
  transition: color 0.15s var(--ease);
}
.ct th:hover { color: var(--tx2); }
.ct th.s { color: var(--tx); }
.ct th .arr { font-size: 0.6rem; margin-left: 2px; opacity: 0; transition: opacity 0.15s; }
.ct th.s .arr { opacity: 1; }
.ct td { padding: 9px 16px; border-top: 1px solid var(--brd2); font-size: var(--fs-base); }
.ct tbody tr:first-child td { border-top: none; }
.ct tbody tr { transition: background 0.1s; }
.ct tbody tr:hover td { background: var(--ac-bg); }
.cn { font-weight: 500; }
.cc { font-family: var(--f-mono); font-size: var(--fs-xs); color: var(--tx3); margin-left: 5px; }
.n { font-family: var(--f-mono); font-weight: 500; font-variant-numeric: tabular-nums; }
.d { color: var(--tx2); font-variant-numeric: tabular-nums; font-size: var(--fs-sm); }
.lg {
  display: inline-block; padding: 1px 5px; border-radius: var(--r-xs);
  font-size: var(--fs-xs); font-weight: 600; margin-right: 2px;
  background: var(--ac-bg); color: var(--tx2);
}

/* ── Canton grid ── */
.cg { display: grid; grid-template-columns: repeat(auto-fill, minmax(88px,1fr)); gap: 6px; }
.cc2 {
  background: var(--surf); border: 1px solid var(--brd2); border-radius: var(--r-sm);
  padding: 14px 4px 12px; text-align: center; transition: border-color 0.15s var(--ease);
}
.cc2:hover { border-color: var(--brd); }
.cc2.empty { opacity: 0.2; }
.cc2 .k { font-family: var(--f-mono); font-size: var(--fs-lg); font-weight: 700; line-height: 1; }
.cc2 .nm { font-size: var(--fs-2xs); color: var(--tx3); margin-top: 3px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.cc2 .cv { font-family: var(--f-mono); font-size: var(--fs-sm); font-weight: 500; color: var(--tx2); margin-top: 4px; }

/* ── Footer ── */
footer {
  text-align: center; padding: 32px 0 48px; color: var(--tx3);
  font-size: var(--fs-xs); border-top: 1px solid var(--brd2);
}
footer a { color: var(--tx2); text-decoration: none; transition: color 0.15s; }
footer a:hover { color: var(--tx); }
footer .made { margin-top: 8px; }

/* ── States ── */
.ld { text-align: center; padding: 32px 0; color: var(--tx3); font-size: var(--fs-base); }
.sp {
  display: inline-block; width: 14px; height: 14px;
  border: 2px solid var(--brd); border-top-color: var(--tx);
  border-radius: 50%; animation: spin 0.6s linear infinite;
  margin-right: 8px; vertical-align: -2px;
}
@keyframes spin { to { transform: rotate(360deg); } }
.hid { display: none !important; }

/* ── Responsive ── */
@media (max-width: 640px) {
  .w { padding: 0 16px; }
  header { padding: 48px 0 12px; }
  header h1 { font-size: 1.5rem; }
  .kpis { grid-template-columns: repeat(2,1fr); margin: 32px 0 44px; }
  .kpi { padding: 20px 8px; }
  .kpi-v { font-size: 1.25rem; }
  section { margin-bottom: 44px; }
  .cg { grid-template-columns: repeat(auto-fill, minmax(72px,1fr)); }
  .tw { margin: 0 -16px; border-radius: 0; border-left: none; border-right: none; }
  .ct th, .ct td { padding: 8px 10px; }
  .ct .hide-m { display: none; }
}
@media (max-width: 380px) {
  .kpi-v { font-size: 1.125rem; }
  .cg { grid-template-columns: repeat(4,1fr); }
}
</style>
</head>
<body>

<nav class="toolbar"><div class="w toolbar-inner">
  <div class="lang-sw" role="group" aria-label="Language">
    <button data-l="de" class="on">DE</button>
    <button data-l="fr">FR</button>
    <button data-l="it">IT</button>
    <button data-l="rm">RM</button>
    <button data-l="en">EN</button>
  </div>
  <button class="tbtn" id="theme-btn" aria-label="Toggle theme">
    <svg id="ico-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
    <svg id="ico-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display:none"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
  </button>
</div></nav>

<div class="w">

  <header>
    <h1><span class="ch">+</span> <span data-t="title">Schweizer Jurisprudenz Open-Access-Datensatz</span></h1>
    <p class="sub" data-t="subtitle">Bundesgerichtliche und kantonale Entscheide</p>
  </header>

  <div class="kpis" id="kpis">
    <div class="ld" style="grid-column:1/-1"><span class="sp"></span></div>
  </div>

  <section id="sec-fed" class="hid">
    <div class="sh">
      <h2 data-t="federal">Bundesgerichte</h2>
      <span class="badge" id="fed-n"></span>
    </div>
    <div class="tw">
      <table class="ct" id="t-fed"><thead><tr>
        <th data-k="name" data-t="th_court">Gericht</th>
        <th data-k="count" data-t="th_decisions">Entscheide</th>
        <th data-k="earliest" class="hide-m" data-t="th_from">Von</th>
        <th data-k="latest" class="hide-m" data-t="th_to">Bis</th>
        <th data-k="languages" data-t="th_languages">Sprachen</th>
      </tr></thead><tbody></tbody></table>
    </div>
  </section>

  <section id="sec-can" class="hid">
    <div class="sh">
      <h2 data-t="cantonal">Kantonale Gerichte</h2>
      <span class="badge" id="can-n"></span>
    </div>
    <div class="tw">
      <table class="ct" id="t-can"><thead><tr>
        <th data-k="name" data-t="th_court">Gericht</th>
        <th data-k="canton" data-t="th_canton">Kanton</th>
        <th data-k="count" data-t="th_decisions">Entscheide</th>
        <th data-k="earliest" class="hide-m" data-t="th_from">Von</th>
        <th data-k="latest" class="hide-m" data-t="th_to">Bis</th>
        <th data-k="languages" class="hide-m" data-t="th_languages">Sprachen</th>
      </tr></thead><tbody></tbody></table>
    </div>
  </section>

  <section id="sec-cantons" class="hid">
    <div class="sh"><h2 data-t="cantons">Kantone</h2></div>
    <div class="cg" id="canton-grid"></div>
  </section>

  <footer>
    <div>
      <span id="ts"></span>
      <a href="https://huggingface.co/datasets/voilaj/swiss-caselaw">HuggingFace</a>
      &middot;
      <a href="https://github.com/jonashertner/caselaw-repo-1">GitHub</a>
    </div>
    <div class="made" data-t="made">Gebaut mit &#9829; von <a href="https://jonashertner.com">Jonas Hertner</a></div>
  </footer>

</div>

<script>
const I18N = {
  de: {
    title:'Schweizer Jurisprudenz Open-Access-Datensatz', subtitle:'Bundesgerichtliche und kantonale Entscheide',
    kpi_decisions:'Entscheide', kpi_courts:'Gerichte', kpi_languages:'Sprachen', kpi_coverage:'Zeitraum',
    federal:'Bundesgerichte', cantonal:'Kantonale Gerichte', cantons:'Kantone',
    th_court:'Gericht', th_canton:'Kanton', th_decisions:'Entscheide', th_from:'Von', th_to:'Bis', th_languages:'Sprachen',
    updated:'Aktualisiert am',
    made:'Gebaut mit \u2665 von <a href="https://jonashertner.com">Jonas Hertner</a>',
    court_bger:'Bundesgericht', court_bge:'BGE Leitentscheide',
    court_bvger:'Bundesverwaltungsgericht', court_bstger:'Bundesstrafgericht', court_bpatger:'Bundespatentgericht',
  },
  fr: {
    title:'Jurisprudence Suisse \u2014 Jeu de donn\u00e9es ouvert', subtitle:'D\u00e9cisions f\u00e9d\u00e9rales et cantonales',
    kpi_decisions:'D\u00e9cisions', kpi_courts:'Tribunaux', kpi_languages:'Langues', kpi_coverage:'P\u00e9riode',
    federal:'Tribunaux f\u00e9d\u00e9raux', cantonal:'Tribunaux cantonaux', cantons:'Cantons',
    th_court:'Tribunal', th_canton:'Canton', th_decisions:'D\u00e9cisions', th_from:'De', th_to:'\u00c0', th_languages:'Langues',
    updated:'Mis \u00e0 jour le',
    made:'Fait avec \u2665 par <a href="https://jonashertner.com">Jonas Hertner</a>',
    court_bger:'Tribunal f\u00e9d\u00e9ral', court_bge:'ATF Arr\u00eats de principe',
    court_bvger:'Tribunal administratif f\u00e9d\u00e9ral', court_bstger:'Tribunal p\u00e9nal f\u00e9d\u00e9ral', court_bpatger:'Tribunal f\u00e9d\u00e9ral des brevets',
  },
  it: {
    title:'Giurisprudenza Svizzera \u2014 Dataset ad accesso aperto', subtitle:'Decisioni federali e cantonali',
    kpi_decisions:'Decisioni', kpi_courts:'Tribunali', kpi_languages:'Lingue', kpi_coverage:'Periodo',
    federal:'Tribunali federali', cantonal:'Tribunali cantonali', cantons:'Cantoni',
    th_court:'Tribunale', th_canton:'Cantone', th_decisions:'Decisioni', th_from:'Da', th_to:'A', th_languages:'Lingue',
    updated:'Aggiornato il',
    made:'Fatto con \u2665 da <a href="https://jonashertner.com">Jonas Hertner</a>',
    court_bger:'Tribunale federale', court_bge:'DTF Sentenze di principio',
    court_bvger:'Tribunale amministrativo federale', court_bstger:'Tribunale penale federale', court_bpatger:'Tribunale federale dei brevetti',
  },
  rm: {
    title:'Giurisprudenza Svizra \u2014 Dataset ad access liber', subtitle:'Sentenziats federals e chantunalas',
    kpi_decisions:'Sentenziats', kpi_courts:'Dretgiras', kpi_languages:'Linguas', kpi_coverage:'Perioda',
    federal:'Dretgiras federalas', cantonal:'Dretgiras chantunalas', cantons:'Chantuns',
    th_court:'Dretgira', th_canton:'Chantun', th_decisions:'Sentenziats', th_from:'Da', th_to:'A', th_languages:'Linguas',
    updated:'Actualis\u00e0 ils',
    made:'Constru\u00ec cun \u2665 da <a href="https://jonashertner.com">Jonas Hertner</a>',
    court_bger:'Tribunal federal', court_bge:'DTF Sentenziats da princip',
    court_bvger:'Tribunal administrativ federal', court_bstger:'Tribunal penal federal', court_bpatger:'Tribunal federal da patentas',
  },
  en: {
    title:'Swiss Jurisprudence Open Access Dataset', subtitle:'Federal and cantonal court decisions',
    kpi_decisions:'Decisions', kpi_courts:'Courts', kpi_languages:'Languages', kpi_coverage:'Coverage',
    federal:'Federal Courts', cantonal:'Cantonal Courts', cantons:'Cantons',
    th_court:'Court', th_canton:'Canton', th_decisions:'Decisions', th_from:'From', th_to:'To', th_languages:'Languages',
    updated:'Updated',
    made:'Built with \u2665 by <a href="https://jonashertner.com">Jonas Hertner</a>',
    court_bger:'Federal Supreme Court', court_bge:'Leading Decisions (BGE)',
    court_bvger:'Federal Administrative Court', court_bstger:'Federal Criminal Court', court_bpatger:'Federal Patent Court',
  },
};

let curLang = localStorage.getItem('lang') || 'de';
function t(key) { return (I18N[curLang]||I18N.de)[key] || I18N.de[key] || key; }

function applyI18n() {
  document.documentElement.lang = curLang === 'en' ? 'en' : curLang;
  document.querySelectorAll('[data-t]').forEach(el => {
    const val = t(el.dataset.t);
    if (/<[a-z]/.test(val)) el.innerHTML = val; else el.textContent = val;
  });
  if (window._statsData) renderAll(window._statsData);
}

document.querySelectorAll('.lang-sw button').forEach(btn => {
  btn.addEventListener('click', () => {
    curLang = btn.dataset.l;
    localStorage.setItem('lang', curLang);
    document.querySelectorAll('.lang-sw button').forEach(b => b.classList.remove('on'));
    btn.classList.add('on');
    applyI18n();
  });
  btn.classList.toggle('on', btn.dataset.l === curLang);
});

let themePref = localStorage.getItem('theme') || 'auto';
function applyTheme() {
  const isDark = themePref === 'dark' ||
    (themePref === 'auto' && matchMedia('(prefers-color-scheme: dark)').matches);
  document.documentElement.dataset.theme = isDark ? 'dark' : 'light';
  document.getElementById('ico-sun').style.display = isDark ? 'none' : '';
  document.getElementById('ico-moon').style.display = isDark ? '' : 'none';
}
applyTheme();
matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => { if (themePref === 'auto') applyTheme(); });
document.getElementById('theme-btn').addEventListener('click', () => {
  themePref = themePref === 'auto' ? 'light' : themePref === 'light' ? 'dark' : 'auto';
  localStorage.setItem('theme', themePref);
  applyTheme();
});

const FED = new Set(['bger','bge','bvger','bstger','bpatger']);
const CANTON_NAMES = {
  CH:'Schweiz/Suisse', AG:'Aargau', AI:'Appenzell I.Rh.', AR:'Appenzell A.Rh.',
  BE:'Bern', BL:'Basel-Land', BS:'Basel-Stadt', FR:'Fribourg',
  GE:'Gen\u00e8ve', GL:'Glarus', GR:'Graub\u00fcnden', JU:'Jura',
  LU:'Luzern', NE:'Neuch\u00e2tel', NW:'Nidwalden', OW:'Obwalden',
  SG:'St. Gallen', SH:'Schaffhausen', SO:'Solothurn', SZ:'Schwyz',
  TG:'Thurgau', TI:'Ticino', UR:'Uri', VD:'Vaud', VS:'Valais', ZG:'Zug', ZH:'Z\u00fcrich',
};
const ALL_CANTONS = ['ZH','BE','LU','UR','SZ','OW','NW','GL','ZG','FR',
  'SO','BS','BL','SH','AR','AI','SG','GR','AG','TG','TI','VD','VS','NE','GE','JU'];

function fmt(n) { return n != null ? n.toLocaleString('de-CH') : '\u2014'; }
function ltags(ls) { return (ls||[]).map(l => `<span class="lg">${l}</span>`).join(''); }
function courtName(code) { const k = 'court_'+code, n = t(k); return n !== k ? n : code; }

function sortable(tbl, data, renderRow, defKey='count') {
  let key = defKey, asc = false;
  const ths = tbl.querySelectorAll('thead th[data-k]');
  const tb = tbl.querySelector('tbody');
  function render() {
    const s = [...data].sort((a, b) => {
      let va = a[key], vb = b[key];
      if (va == null) va = ''; if (vb == null) vb = '';
      if (typeof va === 'string') { va = va.toLowerCase(); vb = vb.toLowerCase(); }
      return (va < vb ? -1 : va > vb ? 1 : 0) * (asc ? 1 : -1);
    });
    tb.innerHTML = s.map(renderRow).join('');
    ths.forEach(h => {
      const active = h.dataset.k === key;
      h.classList.toggle('s', active);
      const arr = h.querySelector('.arr');
      if (arr) arr.textContent = active ? (asc ? '\u25B2' : '\u25BC') : '\u25BC';
    });
  }
  ths.forEach(h => {
    const arr = document.createElement('span');
    arr.className = 'arr'; arr.textContent = '\u25BC'; h.appendChild(arr);
    h.addEventListener('click', () => {
      const k = h.dataset.k;
      if (key === k) asc = !asc; else { key = k; asc = k !== 'count'; }
      render();
    });
  });
  render();
}

function renderAll(data) {
  const range = data.date_range || {};
  document.getElementById('kpis').innerHTML = `
    <div class="kpi"><div class="kpi-v">${fmt(data.total)}</div><div class="kpi-l">${t('kpi_decisions')}</div></div>
    <div class="kpi"><div class="kpi-v">${data.court_count||0}</div><div class="kpi-l">${t('kpi_courts')}</div></div>
    <div class="kpi"><div class="kpi-v">${Object.keys(data.by_language||{}).length}</div><div class="kpi-l">${t('kpi_languages')}</div></div>
    <div class="kpi"><div class="kpi-v">${(range.earliest||'').slice(0,4)}\u2009\u2013\u2009${(range.latest||'').slice(0,4)}</div><div class="kpi-l">${t('kpi_coverage')}</div></div>`;

  const all = data.by_court || [];
  const fed = all.filter(c => c.canton === 'CH' || FED.has(c.court));
  const can = all.filter(c => c.canton !== 'CH' && !FED.has(c.court));

  if (fed.length) {
    document.getElementById('fed-n').textContent = fmt(fed.reduce((s, c) => s + c.count, 0));
    sortable(document.getElementById('t-fed'), fed.map(c => ({ ...c, name: courtName(c.court) })), r => `<tr>
      <td><span class="cn">${r.name}</span><span class="cc">${r.court}</span></td>
      <td class="n">${fmt(r.count)}</td>
      <td class="d hide-m">${r.earliest || '\u2014'}</td>
      <td class="d hide-m">${r.latest || '\u2014'}</td>
      <td>${ltags(r.languages)}</td></tr>`);
    document.getElementById('sec-fed').classList.remove('hid');
  }

  if (can.length) {
    document.getElementById('can-n').textContent = fmt(can.reduce((s, c) => s + c.count, 0));
    sortable(document.getElementById('t-can'), can.map(c => ({
      ...c, name: c.court.replace(c.canton.toLowerCase()+'_','').replace(/_/g,' '),
      cantonName: CANTON_NAMES[c.canton] || c.canton,
    })), r => `<tr>
      <td><span class="cn">${r.name}</span><span class="cc">${r.court}</span></td>
      <td>${r.cantonName}</td>
      <td class="n">${fmt(r.count)}</td>
      <td class="d hide-m">${r.earliest || '\u2014'}</td>
      <td class="d hide-m">${r.latest || '\u2014'}</td>
      <td class="hide-m">${ltags(r.languages)}</td></tr>`);
    document.getElementById('sec-can').classList.remove('hid');
  }

  const cm = {};
  (data.by_canton || []).forEach(c => { cm[c.canton] = c; });
  document.getElementById('canton-grid').innerHTML = ALL_CANTONS.map(code => {
    const e = cm[code], v = e ? e.count : 0;
    return `<div class="cc2${v ? '' : ' empty'}">
      <div class="k">${code}</div><div class="nm">${CANTON_NAMES[code]||code}</div>
      <div class="cv">${v ? fmt(v) : '\u2014'}</div></div>`;
  }).join('');
  document.getElementById('sec-cantons').classList.remove('hid');

  if (data.generated_at) {
    const d = new Date(data.generated_at);
    const loc = { de:'de-CH', fr:'fr-CH', it:'it-CH', rm:'de-CH', en:'en-GB' }[curLang] || 'de-CH';
    document.getElementById('ts').textContent =
      `${t('updated')} ${d.toLocaleDateString(loc, { day:'numeric', month:'long', year:'numeric' })}  \u00b7  `;
  }
}

async function init() {
  applyI18n();
  try {
    const r = await fetch('stats.json');
    if (!r.ok) throw new Error(r.status);
    const data = await r.json();
    window._statsData = data;
    renderAll(data);
  } catch {
    document.getElementById('kpis').innerHTML =
      '<p class="ld" style="grid-column:1/-1">stats.json not found</p>';
  }
}
init();
</script>
</body>
</html>
